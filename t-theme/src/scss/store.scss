@use "./variabless" as *;

.tstore__editbox__form-wrapper {
    scrollbar-width: thin;
    scrollbar-color: $light-blue transparent;
}

.tstore__editbox__form-wrapper::-webkit-scrollbar {
    width: 6px;
}

.tstore__editbox__form-wrapper::-webkit-scrollbar-track {
    background: $white;
}

.tstore__editbox__form-wrapper::-webkit-scrollbar-thumb {
    background: $white;
    border-radius: 3px;
}

.tstore__editbox__form-wrapper::-webkit-scrollbar-thumb:hover {
    background: $blue;
    transition: $anime;
}


// Улучшения интерфейса панели редактирования Tilda Store
.tstore__editbox {
    width: -webkit-fill-available !important;
    margin: 20px;
    height: -webkit-fill-available !important;
    border-radius: 18px;
    background-color: $white-absolut !important;
    overflow: hidden;
    box-shadow: 5px 5px 15px 0 #00000020;

    // left: auto !important;
    // transition: bottom 0.2s ease-in-out, opacity !important;
    // bottom: 0 !important;
}

.tstore__editbox>div:first-child {
    max-width: 100% !important;
    background-color: transparent !important;
    height: -webkit-fill-available !important;
    max-height: -webkit-fill-available !important;
}

.tstore__editbox__form-wrapper {
    max-height: -webkit-fill-available !important;
}

.tstore__closelayer {
    opacity: 1 !important;
    backdrop-filter: blur(10px);
    background-color: $white !important;
}

.tstore__editbox .tstore__editbox__container {
    height: -webkit-fill-available !important;
    padding-top: 0 !important;
}

.tstore__editbox .tstore__editbox__form {
    width: -webkit-fill-available !important;
    margin: 20px !important;
    padding: 0 !important;
    display: grid;
    grid-template-columns: 1fr 1fr;
    gap: 10px 20px !important;
}

.tstore_group__wrapper {
    border-radius: 12px !important;
    background: $white;
    overflow: hidden;
    transition: 0.3s;
}

.tstore_group__wrapper.tstore_group__wrapper_open {
    overflow: hidden;
    // background-color: $light-white;

    // div#grouptitle_producteditions,
    // div#group_producteditions {
    //     background-color: $light-white;
    // }
}

// grid
.tstore__editbox .pe-form-group:nth-child(5) {
    grid-area: 1 / 1;
}

.tstore__editbox .pe-form-group:nth-child(6) {
    grid-area: 2 / 1;
}

.tstore__editbox .pe-form-group:nth-child(7) {
    grid-area: 3 / 1;
}

.tstore__editbox .pe-form-group:nth-child(8) {
    grid-area: 1 / 2;
    grid-row: 1 / 4 !important;
    padding: 10px;
    background-color: $white;
    border-radius: 12px;
    display: grid;
    grid-template-rows: auto 1fr; // label + content
    gap: 10px;
    align-self: stretch;
    height: -webkit-fill-available;
}

.tstore__editbox .pe-form-group:nth-child(8):before {
    content: 'Посмотри, вдруг там что-то важное';
    position: absolute;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%);
}

// accordion styles for gallery group
.tstore__editbox .pe-form-group:nth-child(8) .pe-label {
    cursor: pointer;
    user-select: none;
    grid-row: 1;
    padding: 0 0 20px;
}

.tstore__editbox .pe-form-group:nth-child(8) .pe-form-group-content {
    overflow: hidden;
    transition: grid-template-rows .25s ease, padding .25s ease, opacity .25s ease, max-height .25s ease;
    position: relative;
    grid-row: 2;
    align-self: stretch;
}

// закрытое состояние
.tstore__editbox .pe-form-group:nth-child(8):not(.tstore_group__wrapper_open) .pe-form-group-content {
    max-height: 0;
    opacity: 0;
    padding-top: 0 !important;
    padding-bottom: 0 !important;
}

// открытое состояние (авто-высота через max-height достаточно большая)
.tstore__editbox .pe-form-group:nth-child(8).tstore_group__wrapper_open .pe-form-group-content {
    max-height: 2000px;
    height: fit-content;
    opacity: 1;
}

// гарантируем растягивание строк грид-сетки формы
.tstore__editbox .tstore__editbox__form {
    align-items: stretch;
}


// price
.tstore__editbox .pe-form-group:nth-child(9) {
    grid-area: 4 / 1;
}

.tstore__editbox .pe-form-group:nth-child(10) {
    grid-area: 4 / 2;
}

.tstore__editbox .pe-form-group:nth-child(11) {
    grid-area: 5 / 1;
}

.tstore__editbox .pe-form-group:nth-child(12) {
    grid-area: 5 / 2;
}

.tstore__editbox .pe-form-group_inline {
    width: 100% !important;
}

.tstore__editbox .pe-form-group {
    margin: 0 !important;
}

// variables
.tstore__editbox .tstore_group__wrapper {
    // grid-column: -1 / 1;
    margin: 0 !important;
}

.tstore__editbox .tstore_group__wrapper::after,
.tstore__editbox .tstore_group__wrapper::before {
    display: none !important;
}

.tstore__editbox .tstore_group__wrapper .product_options_table_box::before,
.tstore__editbox .tstore_group__wrapper .product_options_table_box::after {
    display: none !important;
}

.tstore__editbox tr.js-prod-edition {
    border-bottom: solid 1px #bbbbbb;
}

.tstore__editbox .frame.js-editions-controls-wrapper {
    padding: 10px;
    border-radius: $br-block;
    background-color: $white-absolut;
}

.tstore__editbox .tstore_variants__table thead {
    border-radius: 10px 10px 0 0;
    background-color: #ffffff60 !important;
}

.tstore__editbox .tstore_variants__table {
    margin-bottom: 0 !important;
}

// publish
.tstore__editbox .pe-form-group:nth-child(16) {
    grid-area: 9 / 2;
    grid-row: 9 / 10;
}

.tstore__editbox .pe-form-group:nth-child(17) {
    grid-area: 9 / 1;
}

.tstore__editbox .pe-form-group:nth-child(18) {
    grid-area: 10 / 1;
}

// link 
.tstore__editbox .pe-form-group:nth-child(24) {
    grid-area: 15 / 1;
}

.tstore__editbox .pe-form-group:nth-child(26) {
    grid-area: 15 / 2;
}

.tstore__editbox .pe-form-group:nth-child(27) {
    grid-area: 16 / 1;
}

.pe-form-group:last-child {
    grid-area: 17 / 1;
}

// border 
.tstore__editbox .tstore_group__wrapper {
    border-color: transparent !important;
}

.pe-form-group .pe-input,
textarea.pe-textarea,
.pe-form-group:hover .pe-redactor {
    border-color: $blue !important;
}

// popup
.tu-uploader-steps {
    background-color: $white !important;
    backdrop-filter: blur(5px);
}

.tu-opened .tu-popup-bg {
    background-color: #ffffff80 !important;
    opacity: 1 !important;
    backdrop-filter: blur(5px);
}

.tu-popup-content.tu-popup-content-scale {
    box-shadow: $box-shadow !important;
    border-radius: $br-block !important;
}

.tu-title-lg {
    color: $black !important;
}

.tu-uploader-link {
    color: $accent-blue !important;
}

.tu-uploader-button.tu-clickable {
    padding: 10px 20px !important;
    border-radius: $br-btn !important;
    background-color: $accent-blue !important;
}

.tu-uploader-wrapper {
    border: none !important;
    border-radius: $br-block !important;
    background-color: $white !important;
}

// close 
.tu-popup-close {
    display: flex !important;
    height: 28px !important;
    width: 28px !important;
    box-sizing: border-box;
    justify-content: center;
    align-items: center;
    top: 20px !important;
    right: 20px !important;
    border-radius: $br-btn;
    background: $white-absolut;
    box-shadow: $box-shadow;
    padding: 8px !important;

    & .tu-popup-close-line {
        background-color: $black !important;
        width: 1px !important;
        height: 12px !important;
    }

    & .tu-popup-close-line-first {
        left: 50% !important;
        transform: translateX(-50%) rotate(45deg) !important;
    }

    & .tu-popup-close-line-second {
        left: 50% !important;
        transform: translateX(-50%) rotate(-45deg) !important;
    }
}

// close button for tstore__editbox
.tstore__editbox {
    position: relative;
}

.tstore__editbox-close {
    position: absolute;
    top: 20px;
    right: 36px;
    width: 28px;
    height: 28px;
    border-radius: $br-btn;
    padding: 0;
    background: $white-absolut;
    box-shadow: $box-shadow;
    border: none;
    display: inline-flex;
    justify-content: center;
    align-items: center;
    cursor: pointer;
    transition: background-color .2s ease, opacity .2s ease, transform .1s ease;
    z-index: 1001;
}

.tstore__editbox-close:hover {
    background: #ffffff;
}

.tstore__editbox-close:active {
    transform: scale(0.98);
}

.tstore__editbox-close .tstore__editbox-close-line {
    position: absolute;
    width: 16px;
    height: 1px;
    background: #222222;
    border-radius: 1px;
}

.tstore__editbox-close .tstore__editbox-close-line:first-child {
    transform: rotate(45deg);
}

.tstore__editbox-close .tstore__editbox-close-line:last-child {
    transform: rotate(-45deg);
}

.tstore__editbox .tu-uploader-settings {
    right: 35px !important;
    top: 3px !important;
    width: 25px;
    height: 25px;
    opacity: 1 !important;

    & .tu-uploader-settings__icon {
        width: 100%;
        height: 100%;
        filter: invert(1);
        background-size: 80%;
        background-position: center;
        background-repeat: no-repeat;
    }
}

// images
.tstore__editbox .js-gallery-item {
    margin: 0 !important;
    padding: 10px;
    border-radius: $br-block;
    border: none;
    background-color: $white;
    position: relative;
}

.tstore__editbox .js-gallery-items.tsort {
    padding: 10px;
    padding-left: 30px;
    background-color: $white-absolut;
    border-radius: $br-block;
    display: flex;
    flex-direction: column;
    gap: 10px;
}

.tstore__editbox .js-gallery-item table td:first-child {
    position: absolute;
    left: -20px;
    top: 50%;
    transform: translateY(-50%);
}

.tstore__editbox .tstore__editbox__gal-thumb-wrapper {
    border-radius: 6px;
    overflow: hidden;
}

// section
.tstore__editbox .tstore_partselector__part {
    background-color: transparent !important;
}

.tstore__editbox select.js-partsselector {
    background-color: #ffffff60;
    border-radius: $br-block;
}


// <div padding> 
.tstore__editbox .tstore__editbox__form div:nth-child(15),
.tstore__editbox .tstore__editbox__form div:nth-child(23),
.tstore__editbox .tstore__editbox__form div:nth-child(25),
.tstore__editbox .tstore__editbox__form div:nth-child(28) {
    display: none !important;
}

.tstore__editbox .pe-form-group.tstore_group__wrapper_open:nth-child(8)::before {
    display: none;
}

// btn
.tu-popup-toggler {
    border-radius: $br-btn !important;
    width: fit-content !important;
    height: fit-content !important;
    padding: 10px 20px !important;
    background-color: $black !important;
}

.tstore__editbox .tstore__editbox__updatesavebuttons {
    bottom: 10px !important;
    right: 36px !important;
    top: auto !important;
    left: auto !important;
    padding: 6px;
    border-radius: 12px;
    background-color: $white-absolut;
    box-shadow: $box-shadow;
    display: flex !important;
    gap: 6px;
    width: fit-content !important;

    & .tbtn {
        height: fit-content !important;
        width: fit-content !important;
        line-height: 1.2 !important;
        padding: 10px 20px;
        border-radius: $br-btn !important;
        background-color: $black !important;

        &.tbtn_primary {
            background-color: $accent-blue !important;
        }
    }

    .tstore__editbox__save-btn-wrap,
    .tstore__editbox__save-close-btn-wrap {
        width: fit-content !important;
    }
}

.tstore_variants__btns {
    gap: 6px;

    & .tstore_variants__add-variant {
        background-color: $accent-blue !important;
        border-radius: $br-btn !important;
        margin: 0 !important;
        border: none !important;
    }

    & .tstore_variants__edit-options {
        background-color: $black !important;
        border-radius: $br-btn !important;
        margin: 0 !important;
        border: none !important;
        color: $white-absolut !important;
        display: flex;
        gap: 4px;
        align-items: center;
    }

    & .tstore_variants__edit-options svg {
        margin: 0 !important;

        & path {
            fill: $white-absolut !important;
        }
    }
}

// links
.tstore__edit-properties__add-btn.js-add-property,
.js-partinfo-wrapper .pe-hint a,
.js-add-characteristic,
div#group_tabs .pe-hint a,
.js-add-tab.pe-link,
div#group_units .pe-hint a {
    color: $accent-blue !important;
}


.tstore_group__wrapper:nth-child(13) {
    grid-area: 5 / 1;
    grid-column: -1 / 1;
}

.tstore_group__wrapper:nth-child(14) {
    grid-area: 6 / 1;
    grid-column: -1 / 1;
}


// accodrion
.tstore_group__title-wrapper {
    padding: 10px 10px 10px 15px;
}

span.tstore_group__wrapper-icon {
    background: $light-blue !important;
    width: 30px;
    height: 30px;
    transform: none !important;
    border-radius: $br-btn;
    background-image: url(../image/keyboard_arrow_up.svg);
    background-repeat: no-repeat;
    background-position: center;
    background-size: 80%;
    border: none !important;
    transition: $anime;
}

.tstore_group__wrapper_open .tstore_group__wrapper-icon {
    background: $blue !important;
    transition: $anime;
}